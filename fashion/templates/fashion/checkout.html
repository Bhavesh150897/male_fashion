{% extends 'fashion/base.html' %}
{% load static %}
<!-- Hero Section Begin -->
{% block content %}
<!-- Breadcrumb Section Begin -->
    <section class="breadcrumb-option">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="breadcrumb__text">
                        <h4>Check Out</h4>
                        <div class="breadcrumb__links">
                            <a href="./index.html">Home</a>
                            <a href="./shop.html">Shop</a>
                            <span>Check Out</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Breadcrumb Section End -->

    <!-- Checkout Section Begin -->
    <section class="checkout spad">
        <div class="container">
            <div class="checkout__form">
                <div class="row">
                    <div class="col-lg-8 col-md-6">
                        <h6 class="checkout__title">Order Summary</h6>
                        {% for item in cart_items %}
                            <div class="card mb-2">
                                <div class="card-body">
                                    <h5>Product: {{item.product.name}}</h5>
                                    <p>Quantity: {{item.quantity}}</p>
                                    <p class="fw-bold">Price: {{item.total_cost}}</p>
                                </div>
                            </div>
                        {% endfor %}
                        <p class="fw-bold">Total Cost + Rs. 70  = {{totalcost}}</p>
                        <small>(Rs. 70 Delivery Charge)</small> <hr>
                        <small>Term and Condition: Lorem ipsum dolor sit amet consectetur adipisicing elit. Mollitia, ullam saepe! Iure optio repellat dolor velit, minus rem. Facilis cumque neque numquam laboriosam, accusantium adipisci nisi nihil in et quis?</small>
                    </div>
                    <div class="col-lg-4 col-md-6">
                        <div class="checkout__order">
                            <h4>Select Shipping Address</h4>
                            <hr>
                            {% for ad in add %}
                                <div class="card">
                                    <div class="card-body">
                                        <h5>{{ad.first_name}}</h5>
                                        <p>{{ad.address}}, {{ad.city}}, {{ad.state}}- {{ad.zipcode}}</p>
                                    </div>
                                </div>
                                <div class="form-check mt-2 mb-5">
                                    <input class="form-check-input" type="radio" name="custid" id="custadd{{forloop.counter}}" value="{{ad.id}}" checked>
                                    <label class="form-check-label fw-bold" for="custadd{{forloop.counter}}">
                                    Address: {{ forloop.counter }} </label>
                                </div>
                            {% endfor %}
                            {% if payment %}
                                <form action="{% url 'payment-status' %}" method="POST" class="payment-status">
                                {% csrf_token %}
                                    <script
                                            src="https://checkout.razorpay.com/v1/checkout.js"
                                            data-key="rzp_test_mWcxMOaFbrS2ux"
                                            data-amount="{{ payment.amount }}"
                                            data-order_id="{{ payment.id }}"
                                            data-buttontext="PLACE ORDER"
                                            data-name="Welcome to MaleFashion"
                                            data-description="Total Payable"
                                            data-image="{% static 'fashion/img/logo.png' %}"
                                            data-prefill.name="{{ payment.name }}"
                                            data-prefill.email="{{ payment.email }}"
                                            data-theme.color="#111111"
                                    ></script>
                                    <input type="hidden" custom="Hidden Element" name="hidden">
                                    <input type="hidden" custom="Hidden Element" name="cusid">
                                    <input type="hidden" custom="Hidden Element" name="prod_id">
                                </form>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Checkout Section End -->
{% endblock content %}